{
  "contractName": "IStakingData",
  "abi": [],
  "metadata": "{\"compiler\":{\"version\":\"0.8.16+commit.07a7930e\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"project:/contracts/thegraph/IStakingData.sol\":\"IStakingData\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"project:/contracts/thegraph/IStakingData.sol\":{\"keccak256\":\"0xf4e4c6d81c54380720f7c8064d02440b1531f784d025a693abac93a3930aefb1\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://58cef23dc977a8f6d97092d5df926752185f648e9e8011fa3be8eb0b7d97c315\",\"dweb:/ipfs/QmawB5Eu3H5B6SzQDpiDTmdAdahz1DCagqtduMReUbo9HU\"]}},\"version\":1}",
  "bytecode": "0x",
  "deployedBytecode": "0x",
  "immutableReferences": {},
  "generatedSources": [],
  "deployedGeneratedSources": [],
  "sourceMap": "",
  "deployedSourceMap": "",
  "source": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity ^0.8.0;\n\ninterface IStakingData {\n    /**\n     * @dev Allocate GRT tokens for the purpose of serving queries of a subgraph deployment\n     * An allocation is created in the allocate() function and consumed in claim()\n     */\n    struct Allocation {\n        address indexer;\n        bytes32 subgraphDeploymentID;\n        uint256 tokens; // Tokens allocated to a SubgraphDeployment\n        uint256 createdAtEpoch; // Epoch when it was created\n        uint256 closedAtEpoch; // Epoch when it was closed\n        uint256 collectedFees; // Collected fees for the allocation\n        uint256 effectiveAllocation; // Effective allocation when closed\n        uint256 accRewardsPerAllocatedToken; // Snapshot used for reward calc\n    }\n\n    /**\n     * @dev Represents a request to close an allocation with a specific proof of indexing.\n     * This is passed when calling closeAllocationMany to define the closing parameters for\n     * each allocation.\n     */\n    struct CloseAllocationRequest {\n        address allocationID;\n        bytes32 poi;\n    }\n\n    // -- Delegation Data --\n\n    /**\n     * @dev Delegation pool information. One per indexer.\n     */\n    struct DelegationPool {\n        uint32 cooldownBlocks; // Blocks to wait before updating parameters\n        uint32 indexingRewardCut; // in PPM\n        uint32 queryFeeCut; // in PPM\n        uint256 updatedAtBlock; // Block when the pool was last updated\n        uint256 tokens; // Total tokens as pool reserves\n        uint256 shares; // Total shares minted in the pool\n        mapping(address => Delegation) delegators; // Mapping of delegator => Delegation\n    }\n\n    /**\n     * @dev Individual delegation data of a delegator in a pool.\n     */\n    struct Delegation {\n        uint256 shares; // Shares owned by a delegator in the pool\n        uint256 tokensLocked; // Tokens locked for undelegation\n        uint256 tokensLockedUntil; // Block when locked tokens can be withdrawn\n    }\n}\n",
  "sourcePath": "/home/sunjianguo/GolandProjects/hamster-contracts/contracts/thegraph/IStakingData.sol",
  "ast": {
    "absolutePath": "project:/contracts/thegraph/IStakingData.sol",
    "exportedSymbols": {
      "IStakingData": [
        6788
      ]
    },
    "id": 6789,
    "license": "GPL-2.0-or-later",
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 6740,
        "literals": [
          "solidity",
          "^",
          "0.8",
          ".0"
        ],
        "nodeType": "PragmaDirective",
        "src": "46:23:43"
      },
      {
        "abstract": false,
        "baseContracts": [],
        "canonicalName": "IStakingData",
        "contractDependencies": [],
        "contractKind": "interface",
        "fullyImplemented": true,
        "id": 6788,
        "linearizedBaseContracts": [
          6788
        ],
        "name": "IStakingData",
        "nameLocation": "81:12:43",
        "nodeType": "ContractDefinition",
        "nodes": [
          {
            "canonicalName": "IStakingData.Allocation",
            "id": 6757,
            "members": [
              {
                "constant": false,
                "id": 6742,
                "mutability": "mutable",
                "name": "indexer",
                "nameLocation": "327:7:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "319:15:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 6741,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "319:7:43",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6744,
                "mutability": "mutable",
                "name": "subgraphDeploymentID",
                "nameLocation": "352:20:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "344:28:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes32",
                  "typeString": "bytes32"
                },
                "typeName": {
                  "id": 6743,
                  "name": "bytes32",
                  "nodeType": "ElementaryTypeName",
                  "src": "344:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6746,
                "mutability": "mutable",
                "name": "tokens",
                "nameLocation": "390:6:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "382:14:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6745,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "382:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6748,
                "mutability": "mutable",
                "name": "createdAtEpoch",
                "nameLocation": "458:14:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "450:22:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6747,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "450:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6750,
                "mutability": "mutable",
                "name": "closedAtEpoch",
                "nameLocation": "519:13:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "511:21:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6749,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "511:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6752,
                "mutability": "mutable",
                "name": "collectedFees",
                "nameLocation": "578:13:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "570:21:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6751,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "570:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6754,
                "mutability": "mutable",
                "name": "effectiveAllocation",
                "nameLocation": "646:19:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "638:27:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6753,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "638:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6756,
                "mutability": "mutable",
                "name": "accRewardsPerAllocatedToken",
                "nameLocation": "719:27:43",
                "nodeType": "VariableDeclaration",
                "scope": 6757,
                "src": "711:35:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6755,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "711:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "Allocation",
            "nameLocation": "298:10:43",
            "nodeType": "StructDefinition",
            "scope": 6788,
            "src": "291:495:43",
            "visibility": "public"
          },
          {
            "canonicalName": "IStakingData.CloseAllocationRequest",
            "id": 6762,
            "members": [
              {
                "constant": false,
                "id": 6759,
                "mutability": "mutable",
                "name": "allocationID",
                "nameLocation": "1063:12:43",
                "nodeType": "VariableDeclaration",
                "scope": 6762,
                "src": "1055:20:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 6758,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "1055:7:43",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6761,
                "mutability": "mutable",
                "name": "poi",
                "nameLocation": "1093:3:43",
                "nodeType": "VariableDeclaration",
                "scope": 6762,
                "src": "1085:11:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes32",
                  "typeString": "bytes32"
                },
                "typeName": {
                  "id": 6760,
                  "name": "bytes32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1085:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "CloseAllocationRequest",
            "nameLocation": "1022:22:43",
            "nodeType": "StructDefinition",
            "scope": 6788,
            "src": "1015:88:43",
            "visibility": "public"
          },
          {
            "canonicalName": "IStakingData.DelegationPool",
            "id": 6780,
            "members": [
              {
                "constant": false,
                "id": 6764,
                "mutability": "mutable",
                "name": "cooldownBlocks",
                "nameLocation": "1252:14:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1245:21:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint32",
                  "typeString": "uint32"
                },
                "typeName": {
                  "id": 6763,
                  "name": "uint32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1245:6:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint32",
                    "typeString": "uint32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6766,
                "mutability": "mutable",
                "name": "indexingRewardCut",
                "nameLocation": "1328:17:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1321:24:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint32",
                  "typeString": "uint32"
                },
                "typeName": {
                  "id": 6765,
                  "name": "uint32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1321:6:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint32",
                    "typeString": "uint32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6768,
                "mutability": "mutable",
                "name": "queryFeeCut",
                "nameLocation": "1372:11:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1365:18:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint32",
                  "typeString": "uint32"
                },
                "typeName": {
                  "id": 6767,
                  "name": "uint32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1365:6:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint32",
                    "typeString": "uint32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6770,
                "mutability": "mutable",
                "name": "updatedAtBlock",
                "nameLocation": "1411:14:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1403:22:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6769,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1403:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6772,
                "mutability": "mutable",
                "name": "tokens",
                "nameLocation": "1483:6:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1475:14:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6771,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1475:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6774,
                "mutability": "mutable",
                "name": "shares",
                "nameLocation": "1540:6:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1532:14:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6773,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1532:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6779,
                "mutability": "mutable",
                "name": "delegators",
                "nameLocation": "1622:10:43",
                "nodeType": "VariableDeclaration",
                "scope": 6780,
                "src": "1591:41:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_mapping$_t_address_$_t_struct$_Delegation_$6787_storage_$",
                  "typeString": "mapping(address => struct IStakingData.Delegation)"
                },
                "typeName": {
                  "id": 6778,
                  "keyType": {
                    "id": 6775,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "1599:7:43",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "nodeType": "Mapping",
                  "src": "1591:30:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_mapping$_t_address_$_t_struct$_Delegation_$6787_storage_$",
                    "typeString": "mapping(address => struct IStakingData.Delegation)"
                  },
                  "valueType": {
                    "id": 6777,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6776,
                      "name": "Delegation",
                      "nameLocations": [
                        "1610:10:43"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 6787,
                      "src": "1610:10:43"
                    },
                    "referencedDeclaration": 6787,
                    "src": "1610:10:43",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Delegation_$6787_storage_ptr",
                      "typeString": "struct IStakingData.Delegation"
                    }
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "DelegationPool",
            "nameLocation": "1220:14:43",
            "nodeType": "StructDefinition",
            "scope": 6788,
            "src": "1213:464:43",
            "visibility": "public"
          },
          {
            "canonicalName": "IStakingData.Delegation",
            "id": 6787,
            "members": [
              {
                "constant": false,
                "id": 6782,
                "mutability": "mutable",
                "name": "shares",
                "nameLocation": "1800:6:43",
                "nodeType": "VariableDeclaration",
                "scope": 6787,
                "src": "1792:14:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6781,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1792:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6784,
                "mutability": "mutable",
                "name": "tokensLocked",
                "nameLocation": "1867:12:43",
                "nodeType": "VariableDeclaration",
                "scope": 6787,
                "src": "1859:20:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6783,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1859:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6786,
                "mutability": "mutable",
                "name": "tokensLockedUntil",
                "nameLocation": "1931:17:43",
                "nodeType": "VariableDeclaration",
                "scope": 6787,
                "src": "1923:25:43",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6785,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1923:7:43",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "Delegation",
            "nameLocation": "1771:10:43",
            "nodeType": "StructDefinition",
            "scope": 6788,
            "src": "1764:236:43",
            "visibility": "public"
          }
        ],
        "scope": 6789,
        "src": "71:1931:43",
        "usedErrors": []
      }
    ],
    "src": "46:1957:43"
  },
  "compiler": {
    "name": "solc",
    "version": "0.8.16+commit.07a7930e.Emscripten.clang"
  },
  "networks": {},
  "schemaVersion": "3.4.8",
  "updatedAt": "2022-08-12T09:29:39.825Z",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  }
}